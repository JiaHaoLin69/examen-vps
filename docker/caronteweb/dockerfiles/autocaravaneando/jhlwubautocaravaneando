FROM jiahaolin/nginx

RUN apt-get update && apt-get install -y curl gnupg software-properties-common
RUN apt-get install -y curl ca-certificates gnupg 
RUN curl -fsSL https://deb.nodesource.com/setup_22.x | bash -
RUN apt-get install -y nodejs
RUN apt-get clean
RUN rm -rf /var/lib/apt/lists/*
RUN node --version && npm --version

RUN mkdir -p /root/admin/node
RUN mkdir -p /root/admin/node/proyectos/autocaravaneando
WORKDIR /root/admin/node
COPY ./proyectos/autocaravaneando/src/www/ /root/admin/node/proyectos/autocaravaneando/

COPY ./dockerfiles/autocaravaneando/admin/jhlwstart.sh .
RUN chmod +x /root/admin/node/jhlwstart.sh

ENTRYPOINT [ "./jhlwstart.sh" ]